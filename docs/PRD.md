# **오픈소스 QR 코드 생성기: 제품 요구사항 정의서 (PRD)**

## **1. 소개**

이 문서는 누구나 자유롭게 사용할 수 있는 웹 기반 오픈소스 QR 코드 생성기의 제품 요구사항을 정의합니다. 본 프로젝트는 **Next.js 14**, **Tailwind CSS**, **Shadcn UI** 기술 스택을 활용하여, 사용자에게 강력한 QR 코드 생성 및 커스터마이징 경험을 제공하는 것을 목표로 합니다.

* **프로젝트 비전**: 회원가입이나 로그인 없이 누구나 즉시 사용할 수 있는 강력하고 아름다운 정적 QR 코드 생성 도구를 제공하는 동시에, 로그인한 사용자에게는 QR 코드 히스토리 관리와 고급 기능을 제공하여 정보 공유의 장벽을 낮춥니다.
* **핵심 목표**:
    * 다양한 유형의 정적 QR 코드를 즉시 생성하는 기능을 제공합니다.
    * 색상, 로고, 모양 등 광범위한 사용자 정의 옵션을 통해 사용자가 브랜드 아이덴티티를 반영할 수 있도록 지원합니다.
    * Next.js 14를 기반으로 빠르고 반응성이 뛰어난 사용자 경험을 보장합니다.
    * 로그인한 사용자에게는 생성한 QR 코드의 히스토리 관리와 고해상도 다운로드 등 프리미엄 기능을 제공합니다.
    * 오픈소스로 코드를 공개하여 누구나 기여하고 활용할 수 있는 생태계를 구축합니다.
* **타겟 사용자**:
    * **일반 사용자**: Wi-Fi 정보, 웹사이트 링크 등 개인적인 용도로 빠르고 쉽게 QR 코드를 만들고 싶은 모든 사람.
    * **디자이너 및 마케터**: 브랜드 가이드라인에 맞춰 로고와 특정 색상이 포함된 맞춤형 QR 코드를 제작해야 하는 전문가.
    * **개발자**: 프로젝트에 QR 코드 생성 기능이 필요하거나, 오픈소스 프로젝트에 기여하고 싶은 개발자.

---

## **2. 기능 요구사항**

본 프로젝트는 익명 사용자를 위한 정적 QR 코드 생성과 로그인 사용자를 위한 개인화된 QR 코드 관리 기능을 모두 지원합니다.

### **2.1. 정적 QR 코드 생성**

사용자가 입력한 정보를 기반으로 영구적으로 작동하는 정적 QR 코드를 생성합니다. 생성된 코드는 스캔 횟수에 제한이 없으며, 인터넷 연결 없이도 스캔될 수 있는 정보를 담을 수 있습니다.

* **핵심 원칙**: 모든 QR 코드 생성 기능은 무료로 제공되며, 상업적 목적으로도 자유롭게 사용할 수 있습니다.
* **제외 기능**: 데이터 추적 및 생성 후 콘텐츠 수정 기능은 제공하지 않습니다.

### **2.2. 지원 QR 코드 콘텐츠 유형**

다양한 활용 사례를 지원하기 위해 다음과 같은 정적 콘텐츠 유형을 지원해야 합니다.

| 콘텐츠 유형 | 주요 활용 사례 |
| :--- | :--- |
| **URL/웹사이트** | 웹사이트, 랜딩 페이지, 온라인 리소스 공유 |
| **텍스트** | 간단한 메시지, 지침, 제품 정보 등 공유 |
| **이메일** | 미리 채워진 수신자, 제목으로 이메일 앱 실행 |
| **SMS/전화번호** | 미리 채워진 수신 번호, 메시지로 문자 앱 또는 전화 앱 실행 |
| **Wi-Fi** | SSID, 비밀번호 등 네트워크 정보를 저장하여 간편한 Wi-Fi 접속 지원 |
| **vCard/MeCard** | 이름, 전화번호, 이메일, 주소 등 연락처 정보 공유 |
| **지도/위치** | 특정 위치 또는 Google 지도 링크 공유 |

### **2.3. QR 코드 사용자 정의**

브랜드 아이덴티티를 통합하고 시각적 매력을 높여 스캔율을 높이는 데 매우 중요한 기능입니다.

* **색상 변경**: 전경색, 배경색, 그라데이션 색상을 자유롭게 선택할 수 있으며, QR 코드의 눈(Eye) 부분 색상도 개별적으로 설정할 수 있습니다. 스캔 오류 방지를 위해 반전된 색상 선택 시 경고 메시지를 표시해야 합니다.
* **로고 삽입**: 브랜드 로고(PNG, JPG, SVG 등)를 QR 코드 중앙에 추가하여 브랜드 인지도를 높일 수 있습니다. QR 코드의 오류 수정 기능(Error Correction)을 활용하여 로고가 있어도 스캔이 가능하도록 구현합니다.
* **모양 및 패턴 변경**: QR 코드 본체의 패턴과 눈(Eye)의 모양(프레임 및 눈동자)을 다양하게 변경할 수 있습니다.
* **프레임 추가**: "스캔해 주세요"와 같은 클릭 유도 문구(CTA)를 포함한 다양한 디자인의 프레임을 추가하여 스캔율을 높입니다.

### **2.4. 다운로드 및 공유**

생성된 QR 코드는 다양한 형식으로 즉시 다운로드할 수 있어야 합니다.

* **기본 지원 형식** (모든 사용자 이용 가능):
    * **PNG**: 디지털 및 일반 인쇄용으로 적합한 이미지 형식 (최대 1024x1024 픽셀)
    * **SVG**: 크기를 조정해도 품질이 저하되지 않는 벡터 형식
    * **JPG**: 웹 사용에 적합한 압축 이미지 형식 (최대 1024x1024 픽셀)

* **프리미엄 지원 형식** (로그인 사용자 전용):
    * **고해상도 PNG**: 인쇄용 고해상도 이미지 (최대 4096x4096 픽셀)
    * **고해상도 JPG**: 인쇄용 고해상도 이미지 (최대 4096x4096 픽셀)
    * **PDF**: 인쇄 및 공유에 용이한 문서 형식

* **다운로드 제한**: 익명 사용자는 기본 해상도(1024x1024)까지, 로그인 사용자는 인쇄용 고해상도(4096x4096)까지 다운로드 가능합니다.

### **2.5. 사용자 인증 및 QR 코드 히스토리 관리**

로그인한 사용자를 위한 개인화된 QR 코드 관리 기능을 제공합니다.

* **인증 시스템**:
  * **OAuth 로그인**: Google OAuth를 통한 간편 로그인 지원
  * **매직 링크 인증**: 이메일 주소만으로 패스워드 없이 로그인할 수 있는 매직 링크 인증 지원
  * **세션 관리**: 보안이 강화된 JWT 기반 세션 관리
  * **선택적 로그인**: 로그인 없이도 모든 QR 코드 생성 기능을 사용할 수 있으며, 로그인 시에만 추가 기능 제공
  * **개발자 임시 로그인**: 개발 환경에서만 사용 가능한 임시 로그인 기능으로 개발 및 테스트 효율성 향상

* **QR 코드 히스토리 관리**:
  * **자동 저장**: 로그인한 사용자가 생성한 모든 QR 코드를 자동으로 데이터베이스에 저장
  * **히스토리 조회**: 사용자가 생성한 QR 코드 목록을 시간순으로 조회 가능
  * **재사용**: 이전에 생성한 QR 코드를 다시 다운로드하거나 수정하여 새로 생성
  * **고해상도 다운로드**: 저장된 QR 코드를 고해상도(4096x4096) 및 PDF 형식으로 다운로드
  * **즐겨찾기**: 자주 사용하는 QR 코드를 즐겨찾기로 표시하여 빠른 접근 제공
  * **검색 및 필터링**: QR 코드 유형, 생성 날짜, 제목 등으로 검색 및 필터링 기능

* **개인화 기능**:
  * **개인 템플릿**: 사용자가 자주 사용하는 색상, 로고, 프레임 설정을 템플릿으로 저장
  * **통계 대시보드**: 생성한 QR 코드 개수, 유형별 통계 등 개인 사용 통계 제공

---

## **3. 기술 구현 계획**

하이브리드 아키텍처를 통해 익명 사용자를 위한 정적 사이트와 로그인 사용자를 위한 데이터베이스 기반 기능을 모두 지원합니다.

| 기술 스택 | 주요 활용 기능/아키텍처 | 구현 고려사항/장점 |
| :--- | :--- | :--- |
| **Next.js 14** | App Router, 서버 컴포넌트 & SSR | 파일 시스템 기반의 직관적인 라우팅을 제공하며, 빠른 초기 로딩 속도와 검색 엔진 최적화(SEO)에 유리합니다. |
| | 서버 액션 (Server Actions) | QR 코드 생성 로직을 서버에서 처리하여 클라이언트의 부담을 줄이고, 일관된 생성 결과를 보장할 수 있습니다. |
| | API Routes | 사용자 인증 및 QR 코드 CRUD 작업을 위한 RESTful API 엔드포인트를 제공합니다. |
| | 성능 최적화 (Turbopack) | 로컬 개발 서버의 빠른 구동 및 코드 업데이트 속도로 개발 생산성을 높입니다. |
| **Auth.js (NextAuth.js v5)** | OAuth 인증, 매직 링크 인증, 세션 관리 | Google OAuth와 이메일 매직 링크를 통한 안전하고 편리한 다중 인증 시스템을 제공합니다. |
| | Prisma 어댑터 | 사용자 세션과 계정 정보를 데이터베이스에 안전하게 저장하고 관리합니다. |
| | 개발자 임시 로그인 | 개발 환경에서만 활성화되는 임시 로그인 기능으로 로컬 개발 및 테스트 시 빠른 인증 우회를 지원합니다. |
| **Turso Database** | SQLite 호환 분산 데이터베이스 | 빠른 응답 속도와 글로벌 분산으로 최적의 성능을 제공하며, 개발 환경에서는 로컬 SQLite로 쉽게 개발할 수 있습니다. |
| | 엣지 컴퓨팅 최적화 | 전 세계 여러 지역에 분산된 데이터베이스로 사용자에게 가장 가까운 위치에서 빠른 데이터 접근을 제공합니다. |
| **Prisma ORM** | 타입 안전 데이터베이스 접근 | TypeScript와 완벽히 통합된 타입 안전한 데이터베이스 쿼리를 제공하여 개발 생산성과 코드 품질을 높입니다. |
| | 마이그레이션 관리 | 데이터베이스 스키마 변경을 안전하게 관리하고 버전 제어를 통해 협업을 용이하게 합니다. |
| **Tailwind CSS** | 유틸리티 우선(Utility-First) CSS | HTML 내에서 직접 클래스를 조합하여 빠르고 일관된 반응형 UI를 구축할 수 있습니다. |
| **Shadcn UI** | 재사용 가능한 컴포넌트 컬렉션 | 필요한 컴포넌트 코드만 프로젝트에 직접 추가하는 방식으로, 불필요한 종속성을 제거하고 높은 수준의 디자인 커스터마이징을 지원합니다. |

---

## **3.1. 데이터베이스 스키마 설계**

사용자 인증과 QR 코드 히스토리 관리를 위한 데이터베이스 스키마입니다.

```sql
-- 사용자 테이블 (Auth.js 기본 스키마)
model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  accounts      Account[]
  sessions      Session[]
  qrCodes       QrCode[]
  templates     QrTemplate[]
}

-- QR 코드 히스토리 테이블
model QrCode {
  id          String   @id @default(cuid())
  userId      String
  type        String   -- URL, TEXT, WIFI, EMAIL, SMS, VCARD, LOCATION
  title       String?  -- 사용자가 지정한 제목
  content     String   -- QR 코드에 포함된 실제 데이터
  settings    Json     -- 색상, 로고, 모양 등 커스터마이징 설정
  isFavorite  Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@index([userId, createdAt])
  @@index([userId, type])
}

-- 사용자 템플릿 테이블
model QrTemplate {
  id          String   @id @default(cuid())
  userId      String
  name        String   -- 템플릿 이름
  settings    Json     -- 색상, 로고, 모양 등 설정
  isDefault   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@index([userId])
}
```

### **3.2. API 설계**

사용자 인증과 QR 코드 관리를 위한 API 엔드포인트입니다.

* **인증 관련 API**:
  * `GET /api/auth/session` - 현재 사용자 세션 정보 조회
  * `POST /api/auth/signin` - OAuth 로그인 (Auth.js 제공)
  * `POST /api/auth/signin/email` - 매직 링크 이메일 전송 (Auth.js 제공)
  * `GET /api/auth/verify-request` - 매직 링크 확인 페이지 (Auth.js 제공)
  * `POST /api/auth/signout` - 로그아웃 (Auth.js 제공)
  * `GET /api/auth/dev-callback` - 개발자 임시 로그인 콜백 (개발 환경 전용)

* **QR 코드 관리 API**:
  * `GET /api/qrcodes` - 사용자의 QR 코드 목록 조회 (페이지네이션, 필터링, 검색 지원)
  * `POST /api/qrcodes` - 새 QR 코드 생성 및 저장
  * `GET /api/qrcodes/:id` - 특정 QR 코드 상세 정보 조회
  * `PUT /api/qrcodes/:id` - QR 코드 정보 업데이트 (제목, 즐겨찾기 상태 등)
  * `DELETE /api/qrcodes/:id` - QR 코드 삭제
  * `POST /api/qrcodes/:id/favorite` - 즐겨찾기 토글
  * `GET /api/qrcodes/:id/download` - 고해상도 QR 코드 다운로드 (로그인 사용자 전용)

* **템플릿 관리 API**:
  * `GET /api/templates` - 사용자의 템플릿 목록 조회
  * `POST /api/templates` - 새 템플릿 생성
  * `PUT /api/templates/:id` - 템플릿 업데이트
  * `DELETE /api/templates/:id` - 템플릿 삭제

* **통계 API**:
  * `GET /api/stats` - 사용자의 QR 코드 생성 통계

---

## **3.3. 개발자 경험 (DX) 개선**

오픈소스 프로젝트로서 개발자들이 쉽게 기여하고 테스트할 수 있도록 개발 환경을 최적화합니다.

### **3.3.1. 개발자 임시 로그인 시스템**

로컬 개발 및 테스트 시 반복적인 인증 과정을 생략하여 개발 효율성을 높입니다.

* **기능 개요**:
  * 개발 환경(localhost)에서만 활성화되는 원클릭 임시 로그인
  * 프로덕션 환경에서는 완전히 비활성화되어 보안 유지
  * 자동으로 개발 전용 사용자 계정 생성 및 세션 관리

* **기술 구현**:
  * **서버 액션**: `/app/actions/dev-login.ts` - 개발 전용 로그인 처리
  * **API 라우트**: `/app/api/auth/dev-callback/route.ts` - 세션 쿠키 설정
  * **클라이언트 감지**: 브라우저 hostname 기반 개발 환경 감지
  * **환경 격리**: `process.env.NODE_ENV` 기반 기능 활성화/비활성화

* **보안 고려사항**:
  * 프로덕션 환경에서 API 호출 시 403 Forbidden 응답
  * localhost, 127.0.0.1 등 로컬 개발 환경에서만 UI 표시
  * 개발 전용 사용자 ID(`dev-user`) 사용으로 실제 사용자 데이터와 분리

* **사용자 인터페이스**:
  * 로그인 페이지 하단에 "개발자 임시 로그인" 버튼 표시
  * 개발 모드임을 명확히 표시하는 시각적 구분 (빨간색 버튼, 구분선)
  * 로딩 상태 및 에러 처리 포함

### **3.3.2. 개발 워크플로우 최적화**

* **빠른 설정**: 최소한의 환경변수로 로컬 개발 시작 가능
* **핫 리로딩**: Next.js Turbopack을 활용한 빠른 개발 서버
* **타입 안전성**: TypeScript와 Prisma의 완전한 타입 추론 지원
* **코드 품질**: ESLint, Prettier를 통한 일관된 코드 스타일 유지

---

## **4. 향후 개발 로드맵**

오픈소스 프로젝트로서 커뮤니티와 함께 성장하기 위한 단계별 개발 계획입니다.

* **1단계: MVP (최소 기능 제품) 구축**
  * **중점**: 핵심 기능 구현 및 초기 버전 공개.
  * **결과물**:
    * URL, 텍스트 유형의 정적 QR 코드 생성 기능.
    * 기본적인 사용자 정의 기능 (색상 변경, 로고 삽입).
    * PNG 및 SVG 형식으로 다운로드 기능.
    * GitHub을 통한 전체 코드 공개.

* **2단계: 기능 확장 및 인증 시스템 구축**
  * **중점**: 사용자 피드백을 반영하고 활용도를 높이기 위한 기능 추가 및 데이터베이스 기반 기능 구현.
  * **결과물**:
    * 지원 콘텐츠 유형 확대 (Wi-Fi, vCard, 이메일 등).
    * 고급 사용자 정의 기능 추가 (다양한 모양, 패턴, 프레임/CTA).
    * 지원 다운로드 형식 확대 (JPG, PDF).
    * **Auth.js 기반 Google OAuth 및 매직 링크 인증 시스템 구축**.
    * **Turso 데이터베이스 및 Prisma ORM 연동**.
    * **로그인 사용자를 위한 QR 코드 히스토리 관리 기능**.
    * **개인 템플릿 및 즐겨찾기 기능**.

* **3단계: 커뮤니티 및 혁신**
  * **중점**: 개발자 및 사용자의 참여를 유도하고 사용 편의성을 극대화.
  * **결과물**:
    * **PWA (Progressive Web App)** 지원을 통한 오프라인 사용 환경 제공.
    * 다른 서비스나 애플리케이션에서 쉽게 QR 코드를 생성할 수 있는 **간단한 API 엔드포인트** 제공.
    * **통계 대시보드 및 고급 분석 기능**.
    * 프로젝트 기여자를 위한 명확한 가이드라인 문서 작성 및 커뮤니티 활성화.
    * 사용자들이 디자인한 QR 코드 템플릿을 공유하고 사용할 수 있는 템플릿 갤러리 기능 탐색.

---

## **5. 보안 및 개인정보보호**

사용자 데이터 보호와 개인정보보호를 위한 보안 방침입니다.

### **5.1. 데이터 보안**

* **최소 데이터 수집**: 서비스 제공에 필요한 최소한의 정보만 수집 (OAuth 제공자로부터 받은 기본 프로필 정보)
* **데이터 암호화**:
  * 전송 중 데이터 암호화 (HTTPS/TLS)
  * 저장된 민감 정보 암호화 (토큰, 세션 정보)
* **세션 보안**:
  * JWT 기반 안전한 세션 관리
  * 세션 만료 시간 설정 및 자동 갱신
* **데이터베이스 보안**:
  * Turso의 내장 보안 기능 활용
  * 데이터베이스 접근 권한 최소화

* **개발 환경 보안**:
  * **환경별 기능 분리**: 개발자 임시 로그인 기능은 개발 환경에서만 활성화
  * **프로덕션 차단**: 프로덕션 환경에서는 개발자 전용 API 엔드포인트 완전 차단 (403 에러 반환)
  * **로컬 호스트 제한**: 개발 기능은 localhost 및 로컬 개발 환경에서만 접근 가능

### **5.2. 개인정보보호**

* **선택적 로그인**: 로그인 없이도 모든 기본 기능 사용 가능
* **데이터 소유권**: 사용자가 생성한 모든 데이터에 대한 완전한 소유권 보장
* **데이터 삭제권**: 사용자가 언제든지 자신의 계정과 모든 데이터를 삭제할 수 있는 기능 제공
* **투명성**: 수집하는 데이터와 사용 목적에 대한 명확한 안내
* **제3자 공유 금지**: 사용자 데이터를 제3자와 공유하지 않음

### **5.3. 준수 사항**

* **GDPR 준수**: 유럽 일반 데이터 보호 규정 준수
* **개인정보보호법 준수**: 한국 개인정보보호법 준수
* **오픈소스 라이선스**: MIT 라이선스 하에 코드 공개

---

## **6. 구현 우선순위 및 마일스톤**

데이터베이스와 인증 기능 도입을 위한 구체적인 구현 계획입니다.

### **6.1. Phase 1: 기존 기능 유지 및 기반 구축 (4주)**

* **Week 1-2**:
  * Turso 데이터베이스 설정 및 Prisma 스키마 정의
  * Auth.js 설정 및 Google OAuth, 매직 링크 이메일 프로바이더 연동
  * 기본 인증 플로우 구현 (소셜 로그인 + 이메일 매직 링크)

* **Week 3-4**:
  * 기존 QR 코드 생성 기능 유지하면서 데이터베이스 저장 로직 추가
  * 사용자 세션 상태에 따른 조건부 저장 구현
  * 기본 UI/UX 개선 (로그인/로그아웃 버튼, 사용자 프로필)
  * 개발자 임시 로그인 기능 구현 (개발 효율성 향상)

### **6.2. Phase 2: 히스토리 관리 기능 구현 (3주)**

* **Week 5-6**:
  * QR 코드 히스토리 목록 페이지 구현
  * 검색, 필터링, 페이지네이션 기능
  * QR 코드 상세보기 및 재다운로드 기능

* **Week 7**:
  * 즐겨찾기 기능 구현
  * QR 코드 삭제 기능
  * 기본 통계 정보 표시

### **6.3. Phase 3: 고급 기능 및 최적화 (3주)**

* **Week 8-9**:
  * 개인 템플릿 관리 시스템 구현
  * 통계 대시보드 구현
  * 데이터 내보내기/가져오기 기능

* **Week 10**:
  * 성능 최적화 및 보안 강화
  * 에러 핸들링 및 사용자 경험 개선
  * 테스트 코드 작성 및 문서화
