# Copilot Instructions

이 파일은 GitHub Copilot이 이 프로젝트에서 코드 생성 및 기타 작업을 수행할 때 참조하는 가이드라인을 제공합니다.

## 프로젝트 개요

이 프로젝트는 Next.js 14로 구축된 QR 코드 생성기입니다. TypeScript, Tailwind CSS, shadcn/ui를 활용한 모던한 기술 스택으로 빠르고 안정적이며 사용자 친화적인 QR 코드 생성 경험을 제공합니다.

## 일반 가이드라인

* **응답 언어**: 모든 제안 및 응답을 **한국어**로 제공해주세요.
* **컨텍스트 유지**: 현재 작업 중인 파일, 주변 코드, 관련된 다른 열린 파일들을 기반으로 컨텍스트를 이해하고 활용하여 코드를 제안하세요.
* **코드 스타일 준수**: 프로젝트의 기존 코드 스타일(들여쓰기, 네이밍 컨벤션 등)을 파악하고 일관된 스타일로 코드를 생성하세요.
* **코드 가독성**: 간결함보다는 코드 가독성을 우선시하세요. 설명적인 변수명, 명확한 함수명, 논리적인 코드 구조를 사용하세요. 복잡한 로직은 이해하기 쉬운 작은 단위로 나누세요.
* **불필요한 주석 지양**: 코드 생성 시 **주석을 추가하지 마세요.** 개발자가 필요에 따라 수동으로 주석을 추가할 것입니다.
* **관용적 코드**: 특정 프로그래밍 언어와 프레임워크의 일반적인 관용구와 모범 사례를 사용하여 코드를 작성하세요.
* **모듈화 및 재사용성**: 가능한 경우 코드를 모듈화하고 재사용 가능하게 만드는 것을 고려하세요.
* **에러 핸들링**: 적절한 에러 핸들링 메커니즘을 제안하도록 노력하세요.

## 기술 스택별 가이드라인

### Next.js

* **App Router**: 라우팅, 레이아웃, 서버 컴포넌트에 App Router를 활용하세요.
* **Server Actions**: 서버 사이드에서의 뮤테이션과 데이터 페칭에 Server Actions를 사용하세요.
* **API Routes**: 클라이언트 사이드 데이터 페칭을 위해 API Routes를 사용하세요.
* **HTTP Client**: 모든 API 호출에 `fetch` 대신 `axios`를 사용하여 일관된 에러 핸들링과 요청/응답 인터셉터를 보장하세요.

### React

* **상태 관리**: 폼 상태 관리에는 `useState` 대신 `react-hook-form`을 우선적으로 사용하세요. 전역 상태 관리에는 `Zustand`를 사용하세요.
* **컴포넌트화**: 복잡한 컴포넌트를 더 작고 재사용 가능한 컴포넌트로 나누세요.
* **데이터 페칭**: 서버 상태 관리와 캐싱에 `@tanstack/react-query`를 사용하세요.

### 인증

* **NextAuth.js**: Prisma 어댑터와 함께 NextAuth.js v5.0.0-beta.28을 인증에 사용하세요.
* **데이터베이스**: 인증 데이터는 `@auth/prisma-adapter`를 사용하여 저장하세요.

### 데이터베이스

* **Prisma**: PostgreSQL과 함께 Prisma를 ORM으로 사용하세요.
* **Supabase**: 프로덕션 데이터베이스는 Row Level Security(RLS)가 적용된 Supabase PostgreSQL을 사용하세요.

### QR 코드 생성

* **라이브러리**: 고급 QR 코드 커스터마이징에는 `qr-code-styling`, 서버 사이드 스타일링에는 `qr-code-styling-node`, 기본 생성에는 `qrcode`, React 컴포넌트에는 `qrcode.react`를 사용하세요.
* **캔버스**: 서버 사이드 QR 코드 렌더링에는 `canvas` 라이브러리를 사용하세요.

### shadcn/ui

* **컴포넌트 사용**: shadcn/ui 컴포넌트를 사용할 때는 `@/components/ui/...`에서 가져오세요.
* **컴포넌트 생성**: 새 컴포넌트를 생성할 때는 shadcn/ui 컴포넌트의 기존 구조와 스타일을 따르세요.
* **Radix UI**: 모든 UI 컴포넌트는 Radix UI 프리미티브 위에 구축됩니다.

### Tailwind CSS

* **유틸리티 우선**: Tailwind CSS의 유틸리티 우선 접근 방식을 받아들이세요.
* **`tailwind-merge`**: 충돌하는 CSS 클래스를 처리하기 위해 `tailwind-merge` 라이브러리를 사용하세요.
* **`clsx`**: 조건부 클래스명에 `clsx` 라이브러리를 사용하세요.
* **애니메이션**: 컴포넌트 애니메이션에 `tailwindcss-animate`를 사용하세요.

### 폼 핸들링

* **React Hook Form**: 폼 검증에 `@hookform/resolvers`와 함께 `react-hook-form`을 사용하세요.
* **검증**: 스키마 검증과 타입 안전성에 `zod`를 사용하세요.
* **필드 검증**: 타입 안전성과 애플리케이션 전반의 일관된 검증 규칙을 보장하기 위해 항상 Zod 스키마를 폼 필드 데이터 검증에 사용하세요.

### Zustand

* **상태 관리**: 전역 상태 관리에 Zustand를 사용하세요. `hooks` 디렉토리에 스토어를 생성하세요.

### UI 컴포넌트

* **테이블**: 데이터 테이블에 `@tanstack/react-table` v8.21.3을 사용하세요.
* **알림**: 토스트 알림에 `sonner` v2.0.5를 사용하세요.
* **날짜 선택기**: 날짜 처리에 `date-fns` v4.1.0과 함께 `react-day-picker` v9.7.0을 사용하세요.
* **차트**: 데이터 시각화에 `recharts` v2.15.3을 사용하세요.
* **아이콘**: 아이콘에 `lucide-react` v0.515.0을 사용하세요.
* **캐러셀**: 캐러셀 컴포넌트에 `embla-carousel-react` v8.6.0을 사용하세요.
* **패널**: 크기 조절 가능한 레이아웃 패널에 `react-resizable-panels` v3.0.3을 사용하세요.
* **드로어**: 모바일 드로어 컴포넌트에 `vaul` v1.1.2를 사용하세요.
* **커맨드**: 커맨드 팔레트 인터페이스에 `cmdk` v1.1.1을 사용하세요.
* **OTP**: OTP 입력 컴포넌트에 `input-otp` v1.4.2를 사용하세요.

### 유틸리티

* **HTTP 클라이언트**: HTTP 요청에 `axios` v1.10.0을 사용하세요.
* **쿼리 문자열**: 쿼리 문자열 파싱에 `qs` v6.14.0을 사용하세요.
* **쿠키**: 쿠키 관리에 `cookies-next` v4.3.0을 사용하세요.
* **DOM 조작**: 서버 사이드 DOM 작업에 `jsdom` v26.1.0을 사용하세요.
* **JWT**: JWT 토큰 처리에 `jose` v6.0.11을 사용하세요.
* **날짜 라이브러리**: 날짜 조작에 `date-fns` v4.1.0을, 경량 날짜 작업에 `dayjs` v1.11.13을 사용하세요.
* **주소 검색**: 한국 주소 검색 기능에 `react-daum-postcode` v3.2.0을 사용하세요.
* **유틸리티 함수**: 모던 유틸리티 함수에 `@toss/utils` v1.6.1과 `es-toolkit` v1.39.5를 사용하세요.
* **브라우저 호환성**: 브라우저 호환성 설정에 `browserslist` v4.25.0을 사용하세요.
* **인증 라이브러리**: 추가 인증 유틸리티에 `auth` v1.2.3을 사용하세요.
* **레이아웃 관리**: 오버레이 및 모달 관리에 `overlay-kit` v1.8.2를 사용하세요.
* **데이터베이스**: PostgreSQL 클라이언트 연결에 `pg` v8.16.2를 사용하세요.
* **CSS 유틸리티**: 컴포넌트 변형 처리에 `class-variance-authority` v0.7.1을, 클래스 병합에 `tailwind-merge` v3.3.1을 사용하세요.
* **테마**: 테마 관리에 `next-themes` v0.4.6을 사용하세요.
* **개발 도구**: TypeScript 실행에 `tsx` v4.20.3을, Node.js TypeScript 지원에 `ts-node` v10.9.2를 사용하세요.

## 디렉토리 구조

* `app/`: 애플리케이션의 라우트, 레이아웃, 페이지를 포함합니다.
  * `actions/`: 데이터 뮤테이션과 비즈니스 로직을 위한 서버 액션 (account-management, data-management, log-management, qr-code-generator, qr-code-management, template-management).
  * `api/`: 클라이언트 사이드 데이터 페칭을 위한 API 라우트 (auth, cron, qrcodes).
  * `auth/`: 인증 관련 페이지 (signin, error).
  * `dashboard/`: 보호된 대시보드 페이지와 기능 (account, dashboard, history, settings).
  * `qrcode/`: QR 코드 생성 메인 페이지와 컴포넌트.
    * `components/`: QR 코드 전용 컴포넌트 (각 타입별 폼 카드: email, location, sms, textarea, url, vcard, wifi; preview, styling, handlers).
* `components/`: 재사용 가능한 컴포넌트를 포함합니다.
  * `ui/`: shadcn/ui 컴포넌트를 포함합니다 (46개 컴포넌트: accordion, alert-dialog, avatar, button, calendar, card, carousel, chart, checkbox, command, dialog, drawer, dropdown-menu, form, input, navigation-menu, pagination, popover, progress, resizable, scroll-area, select, sidebar, skeleton, slider, sonner, switch, table, tabs, textarea, toggle, tooltip 등).
  * 기타 유틸리티 컴포넌트 (address-search, loading-spinner, user-nav, github-badge, history-button, log-statistics, new-qr-code-button, tailwind-indicator, unauthenticated, user-profile 등).
* `lib/`: 유틸리티 함수와 상수를 포함합니다.
  * 데이터베이스 연결, 다운로드 유틸리티, QR 코드 유틸리티, 인증 헬퍼, 에러 로깅, API 로깅 등.
  * `supabase/`: Supabase 클라이언트와 관련 유틸리티.
* `hooks/`: 커스텀 훅과 Zustand 스토어를 포함합니다.
  * 모바일 감지 (`use-mobile.tsx`), 로그인 유지 기능 (`use-remember-me.ts`), 토큰 새로고침 (`use-token-refresh.ts`)을 위한 커스텀 훅.
* `types/`: TypeScript 타입 정의를 포함합니다.
  * QR 코드, 데이터 관리, 환경, 인증, RLS, 로그 등에 대한 타입 정의.
* `public/`: 정적 에셋을 포함합니다.
  * PWA 매니페스트, 서비스 워커, 폰트, 스크린샷 등.
* `prisma/`: 데이터베이스 스키마와 마이그레이션을 포함합니다.
* `docs/`: 프로젝트 문서를 포함합니다.
  * PRD.md (제품 요구사항 문서)
  * DEPENDENCIES.md (의존성 문서)
  * RLS.md (Row Level Security 설정 가이드)
  * CRON.md (크론 작업 문서)
  * LOGGING.md (로깅 시스템 문서)
  * LOGGING_OPTIMIZATION.md (로깅 시스템 최적화 문서)
* `context/`: React 컨텍스트 프로바이더를 포함합니다.
  * 인증 프로바이더 (`auth-provider.tsx`)와 클라이언트 프로바이더 (`client-providers.tsx`).
* `config/`: 애플리케이션 설정을 포함합니다.
  * `app.ts`: 애플리케이션 설정 상수.
* `scripts/`: 유틸리티 스크립트를 포함합니다.
  * `setup-rls.sh`: RLS 설정 스크립트.
  * `migrate-logging-system.sh`: 로깅 시스템 마이그레이션 스크립트.
  * `test-unified-logging.ts`: 통합 로깅 테스트 스크립트.
* `screenshots/`: 문서용 애플리케이션 스크린샷을 포함합니다.
  * 모든 QR 코드 타입과 대시보드 페이지의 스크린샷.

## 특정 작업 가이드라인

* **Git 커밋 메시지**: Git 커밋 메시지를 생성할 때는 프로젝트 루트에 있는 `.gitmessage.txt` 파일을 참조하고 해당 형식과 내용을 따르세요.

## 피드백 및 개선

Copilot의 제안이 기대에 미치지 못하는 경우, 적극적으로 수정하고 피드백을 제공하여 향후 Copilot이 더 나은 제안을 할 수 있도록 도와주세요.

## 프로젝트 현재 상태

* **버전**: v1.4.31 (2025년 6월 29일 기준)
* **파일 수**: 170+ TypeScript/JavaScript 파일
* **패키지 수**: 100+ npm 패키지 (73개 dependencies + 30개 devDependencies)
* **UI 컴포넌트**: 46개 shadcn/ui 컴포넌트
* **QR 코드 타입**: 7가지 지원 타입 (URL, TEXTAREA, WIFI, EMAIL, SMS, VCARD, LOCATION)
* **인증**: Google OAuth가 적용된 NextAuth.js v5.0.0-beta.28
* **데이터베이스**: Prisma ORM v6.10.1이 적용된 Supabase PostgreSQL
* **보안**: Row Level Security (RLS) 구현
* **상태 관리**: 전역 상태 관리를 위한 Zustand v5.0.5 스토어 구현
* **폼 핸들링**: Zod v3.25.64 검증이 통합된 React Hook Form v7.58.0
* **쿼리 관리**: 서버 상태 관리를 위한 React Query v5.80.7
* **코드 품질**: 엄격한 규칙으로 구성된 ESLint, Prettier, TypeScript
* **로깅 시스템**: 통합 로깅 시스템 (UnifiedLogger) 구현
* **PWA**: Progressive Web App 지원
